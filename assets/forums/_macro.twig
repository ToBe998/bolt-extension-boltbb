{% macro author(id, ip) %}
    {% if profile is not empty %}
        <div class="row text-center">
            <img src="{{ profile.avatar }}" alt="{{ profile.username }}" class="avatar">
        </div>
        <div class="row text-center">
            {{ profile.username }}
        </div>
    {% endif %}
    <div class="row text-center">{{ ip }}</div>
{% endmacro %}

{% macro topic(base_uri, forum, topic) %}
    {% if topic.visibility == 'normal' %}
        {% set class = topic.state %}
    {% else %}
        {% set class = topic.visibility %}
    {% endif %}

    {# Topic #}
    <div class="row topic {{ class }}" id="topic-{{ topic.forum }}-{{ topic.id }}">

        <div class="small-6 columns text-left topic-title">
            <p><a href="/{{ base_uri }}/{{ forum.slug }}/{{ topic.slug }}">{{ topic.title }}</a></p>
            <div>Posted by {{ topic.author.username }}</div>
            <div>{{ topic.datecreated|date('M j, Y H:i:s') }}</div>
        </div>

        <div class="small-2 columns text-center topic-replies">
            {{ topicreplycount(topic.id) }}
        </div>

        <div class="small-4 columns text-left topic-last-post">
            {% set lastpost = lastpost(forum.id) %}
            {%  if lastpost is not empty %}
                <div>{{ forum.lastpost.datecreated|date('M j, Y H:i:s') }}</div>

                {% if lastpost.author is not empty %}
                    <div><img src="{{ lastpost.author.avatar }}" alt="{{ lastpost.author.username }}" class="avatar">&nbsp;{{ lastpost.author.username }}</div>
                {% endif %}
            {% endif %}
        </div>

    </div>

    {# Topic footer #}
    <div class="row topic-footer">
        <div class="small-12 columns"></div>
    </div>
{% endmacro %}